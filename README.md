# MindfulSpace - AI Journaling Companion

A privacy-first AI-powered journaling companion built for the Palo Alto Networks NetSec Hackathon.

## Features

- **Real-time Sentiment Analysis**: Local AFINN-based sentiment analysis as you type
- **AI-Powered Prompts**: Daily context-aware journaling prompts generated by Claude
- **AI Writing Companion**: Real-time suggestions and follow-up questions
- **Weekly Summaries**: AI-generated insights from your journaling patterns
- **Privacy-First**: PII masking before any external API calls
- **Theme Extraction**: Automatic theme identification from entries
- **Dashboard Analytics**: Sentiment trends, theme clouds, and statistics
- **Data Export**: Download all your data in JSON format
- **Mobile Responsive**: Works seamlessly on all devices

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Database**: PostgreSQL (via Supabase)
- **ORM**: Prisma
- **Authentication**: Supabase Auth
- **AI**: Anthropic Claude API (Sonnet 4)
- **Local AI**: AFINN sentiment analysis, Compromise NLP
- **UI**: shadcn/ui, Tailwind CSS, Recharts
- **Deployment**: Vercel

## Setup

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd PANW_NetSec
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   ```bash
   cp .env.example .env.local
   ```
   
   Fill in the following variables:
   - `DATABASE_URL`: PostgreSQL connection string (from Supabase)
   - `NEXT_PUBLIC_SUPABASE_URL`: Your Supabase project URL
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`: Your Supabase anonymous key
   - `SUPABASE_SERVICE_ROLE_KEY`: Your Supabase service role key
   - `ANTHROPIC_API_KEY`: Your Anthropic Claude API key
   - `NEXT_PUBLIC_APP_URL`: Your app URL (http://localhost:3000 for dev)

4. **Set up the database**
   ```bash
   npx prisma db push
   npx prisma generate
   ```

5. **Run the development server**
   ```bash
   npm run dev
   ```

6. **Open your browser**
   Navigate to [http://localhost:3000](http://localhost:3000)

## Project Structure

```
src/
├── app/                    # Next.js App Router pages
│   ├── (auth)/            # Authentication routes
│   ├── (dashboard)/       # Protected dashboard routes
│   └── api/                # API routes
├── components/             # React components
│   ├── dashboard/         # Dashboard components
│   ├── journal/           # Journal entry components
│   ├── layout/            # Layout components
│   └── settings/          # Settings components
├── lib/                    # Utility libraries
│   ├── anthropic.ts       # Claude API wrapper
│   ├── pii-masking.ts     # PII masking functions
│   ├── sentiment.ts       # Sentiment analysis
│   └── theme-extraction.ts # Theme extraction
└── hooks/                  # Custom React hooks
```

## Key Features Implementation

### Privacy-First Architecture
- All PII (emails, phones, SSNs, credit cards, addresses) is masked before sending to Claude API
- Local sentiment analysis using AFINN (no external API calls)
- User controls for AI features and analytics
- Data export functionality

### AI Integration
- **Daily Prompts**: Context-aware prompts based on user history
- **Real-Time Companion**: Debounced suggestions (2s delay, >100 chars)
- **Weekly Summaries**: Aggregated data only (no full entry text sent to Claude)

### Local Processing
- Sentiment analysis runs locally using AFINN-165
- Theme extraction using Compromise NLP
- Instant feedback without API calls

## API Routes

- `GET/POST /api/entries` - Entry CRUD operations
- `GET/PUT/DELETE /api/entries/[id]` - Single entry operations
- `GET /api/ai/prompt` - Generate daily prompt
- `POST /api/ai/suggest` - Get AI suggestion
- `GET /api/ai/summary/weekly` - Generate weekly summary
- `PUT /api/user/preferences` - Update user preferences
- `GET /api/user/export` - Export user data
- `DELETE /api/user/delete` - Delete user account

## Deployment

1. **Push to GitHub**
2. **Connect to Vercel**
3. **Set environment variables** in Vercel dashboard
4. **Deploy**

The `postinstall` script will automatically generate the Prisma client on deployment.

## Development

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run start` - Start production server
- `npm run lint` - Run ESLint
- `npx prisma studio` - Open Prisma Studio

## License

MIT

## Acknowledgments

Built for Palo Alto Networks NetSec Hackathon 2026.
